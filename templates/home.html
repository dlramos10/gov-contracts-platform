<!DOCTYPE html>
<html>
<head>
  <title>Gov Contract Opportunities</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }
    header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    header img {
      height: 60px;
      margin-right: 20px;
    }
    header h1 {
      font-size: 24px;
      color: #2c3e50;
      margin: 0;
    }
    form {
      margin-bottom: 20px;
    }
    label {
      margin-right: 10px;
    }
    input[type="text"], input[type="date"] {
      margin-right: 10px;
      padding: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #2c3e50;
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    a {
      color: #0066cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <header>
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Titan Logo">
    <h1>Contract Opportunities Dashboard</h1>
  </header>

  <form method="get" action="{{ url_for('home') }}">
    <label>Keyword:</label>
    <input type="text" name="keyword" value="{{ request.args.get('keyword', '') }}">

    <label>NAICS:</label>
    <input type="text" name="naics" value="{{ request.args.get('naics', '') }}">

    <label>Start Date:</label>
    <input type="date" name="start_date" value="{{ request.args.get('start_date', '') }}">

    <label>End Date:</label>
    <input type="date" name="end_date" value="{{ request.args.get('end_date', '') }}">

    <input type="submit" value="Search">
  </form>

  {% if opportunities %}
  <table>
    <thead>
      <tr>
        <th>Source</th>
        <th>Solicitation / Award</th>
        <th>Title</th>
        <th>Agency</th>
        <th>Date</th>
        <th>NAICS</th>
        <th>Link</th>
      </tr>
    </thead>
    <tbody>
      {% for opp in opportunities %}
      <tr>
        <td>{{ opp[0] }}</td>
        <td>{{ opp[0] if opp[0] != 'USAspending' else 'Award' }}</td>
        <td>{{ opp[1] }}</td>
        <td>{{ opp[2] }}</td>
        <td>{{ opp[3] }}</td>
        <td>{{ opp[4] }}</td>
        <td><a href="{{ opp[5] }}" target="_blank">View</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>No results found.</p>
  {% endif %}

</body>
</html>
